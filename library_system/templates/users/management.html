{% extends 'base.html' %} {% load static %} {% block title %}Управление
пользователями{% endblock %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/librarian.css' %}" />
{% endblock %} {% block content %}
<div class="container">
  <h1>Управление пользователями</h1>

  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Имя пользователя</th>
          <th>Email</th>
          <th>Роль</th>
          <th>Действия</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>
            {% if user.is_admin %}
            <span class="status-badge status-active">Администратор</span>
            {% elif user.is_librarian %}
            <span class="status-badge status-returned">Библиотекарь</span>
            {% else %}
            <span class="status-badge">Читатель</span>
            {% endif %}
          </td>
          <td>
            <form
              method="post"
              action="{% url 'users:change_user_role' user.id %}"
              class="inline-form"
            >
              {% csrf_token %}
              <select name="role" onchange="this.form.submit()">
                <option
                  value="reader"
                  {%
                  if
                  not
                  user.is_admin
                  and
                  not
                  user.is_librarian
                  %}selected{%
                  endif
                  %}
                >
                  Читатель
                </option>
                <option
                  value="librarian"
                  {%
                  if
                  user.is_librarian
                  %}selected{%
                  endif
                  %}
                >
                  Библиотекарь
                </option>
                <option value="admin" {% if user.is_admin %}selected{% endif %}>
                  Администратор
                </option>
              </select>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
