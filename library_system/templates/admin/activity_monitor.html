{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/admin_custom.css' %}">
{% endblock %}

{% block title %}–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">‚ö° –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</a></h1>
{% endblock %}

{% block content_title %}<h1>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã</h1>{% endblock %}

{% block content %}
<div class="module">
    <p class="current-date">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–Ω–∏–≥–∞–º–∏</p>

    {% if recent_activities %}
    <div class="results">
        <table class="activity-table">
            <thead>
                <tr>
                    <th>üìÖ –î–∞—Ç–∞ –≤—ã–¥–∞—á–∏</th>
                    <th>üë§ –ß–∏—Ç–∞—Ç–µ–ª—å</th>
                    <th>üìö –ö–Ω–∏–≥–∞</th>
                    <th>üìä –°—Ç–∞—Ç—É—Å</th>
                    <th>‚è±Ô∏è –î–Ω–µ–π –¥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for activity in recent_activities %}
                <tr class="{% cycle 'row1' 'row2' %}">
                    <td>{{ activity.borrowed_date|date:"d.m.Y H:i" }}</td>
                    <td><strong>{{ activity.user.get_full_name|default:activity.user.username }}</strong></td>
                    <td>{{ activity.book.title }}</td>
                    <td>
                        {% if activity.status == 'borrowed' %}
                            {% if activity.is_overdue %}
                                <span class="status-badge status-overdue">–ü–†–û–°–†–û–ß–ï–ù–û</span>
                            {% else %}
                                <span class="status-badge status-active">–ê–ö–¢–ò–í–ù–û</span>
                            {% endif %}
                        {% else %}
                            <span class="status-badge status-returned">–í–û–ó–í–†–ê–©–ï–ù–û</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if activity.status == 'borrowed' and activity.days_until_due is not None %}
                            {% if activity.days_until_due > 7 %}
                                <span class="days-badge days-positive">{{ activity.days_until_due }} –¥–Ω.</span>
                            {% elif activity.days_until_due > 0 %}
                                <span class="days-badge days-warning">{{ activity.days_until_due }} –¥–Ω.</span>
                            {% else %}
                                <span class="days-badge days-negative">{{ activity.overdue_days }} –¥–Ω.</span>
                            {% endif %}
                        {% else %}
                            <span>-</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <p>üìù –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
    </div>
    {% endif %}
</div>
{% endblock %}