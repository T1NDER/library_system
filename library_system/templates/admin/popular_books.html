{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/admin_reports.css' %}">
{% endblock %}

{% block title %}–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏ | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">üìö –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏</a></h1>
{% endblock %}

{% block content_title %}<h1>–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏</h1>{% endblock %}

{% block content %}
<div class="admin-report">
    <div class="report-section">
        <h2>–¢–æ–ø-20 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–Ω–∏–≥</h2>
        <table class="report-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ö–Ω–∏–≥–∞</th>
                    <th>–ê–≤—Ç–æ—Ä</th>
                    <th>–ñ–∞–Ω—Ä</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–¥–∞—á</th>
                </tr>
            </thead>
            <tbody>
                {% for book in popular_books %}
                <tr>
                    <td class="rank">{{ forloop.counter }}</td>
                    <td><strong>{{ book.title }}</strong></td>
                    <td>{{ book.author.name }}</td>
                    <td>{{ book.genre.name }}</td>
                    <td><span class="count-badge">{{ book.borrow_count }}</span></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≤—ã–¥–∞—á–∞—Ö</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="stats-grid">
        <div class="report-section">
            <h2>üìà –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –ø–æ –∂–∞–Ω—Ä–∞–º</h2>
            <table class="report-table">
                <thead>
                    <tr>
                        <th>–ñ–∞–Ω—Ä</th>
                        <th>–í—ã–¥–∞—á–∏</th>
                        <th>–ö–Ω–∏–≥</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in genre_stats %}
                    <tr>
                        <td>{{ stat.genre__name }}</td>
                        <td><span class="count-badge">{{ stat.total_borrowings }}</span></td>
                        <td>{{ stat.total_books }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –∂–∞–Ω—Ä–∞–º</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="report-section">
            <h2>üë§ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–≤—Ç–æ—Ä—ã</h2>
            <table class="report-table">
                <thead>
                    <tr>
                        <th>–ê–≤—Ç–æ—Ä</th>
                        <th>–í—ã–¥–∞—á–∏</th>
                        <th>–ö–Ω–∏–≥</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in author_stats %}
                    <tr>
                        <td>{{ stat.author__name }}</td>
                        <td><span class="count-badge">{{ stat.total_borrowings }}</span></td>
                        <td>{{ stat.total_books }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –∞–≤—Ç–æ—Ä–∞–º</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}